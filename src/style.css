:root{
  --bg:#0b0d12;--panel:#121521;--ink:#eaf1ff;--muted:#a7b1c6;--brand:#5bd6ff;--good:#38d39f;--bad:#ff6b6b;--warn:#ffd166;
  --accent:#7aa0ff;--accent2:#f68bf0;--card:#1a1f2d;--chip:#20263a;--border:#27304a;--glow:rgba(91,214,255,.25);
}
*{box-sizing:border-box}
html,body{margin:0;height:100%;background:var(--bg);color:var(--ink);font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",sans-serif}
button{appearance:none;border:0;border-radius:12px;padding:.85rem 1rem;background:var(--chip);color:var(--ink);font-weight:700;touch-action:manipulation;cursor:pointer}
button:disabled{opacity:.45;cursor:not-allowed}
a{color:inherit}

.app{max-width:760px;margin:0 auto;padding:10px 10px 90px}
header{display:flex;align-items:center;justify-content:space-between;gap:10px;padding:4px 2px}
.title{font-weight:800}
.stack{display:flex;gap:8px;flex-wrap:wrap}
.chip{background:var(--chip);padding:6px 8px;border-radius:10px;border:1px solid var(--border);color:var(--muted);font-size:.86rem}
.row{display:grid;gap:10px}
.boss,.hero{background:var(--panel);border:1px solid var(--border);border-radius:16px;padding:12px}
.boss{position:sticky;top:0;z-index:1;box-shadow:0 6px 24px rgba(0,0,0,.35)}
.boss h2,.hero h3{margin:0 0 6px}
.stats{display:grid;grid-template-columns:1fr 1fr;gap:6px;margin-top:6px}
.stat{background:var(--card);padding:8px;border-radius:12px;display:flex;align-items:center;gap:8px}
.bar{height:10px;background:#1e2435;border-radius:8px;overflow:hidden;flex:1}
.bar>span{display:block;height:100%;background:linear-gradient(90deg,var(--good),#42e0ff);width:100%}
.pill{background:var(--chip);padding:4px 8px;border-radius:999px;color:var(--muted);font-weight:700;font-size:.8rem;border:1px solid var(--border)}
.suit{font-size:1.05rem;padding:.15rem .45rem;border-radius:8px;background:#111727;border:1px solid var(--border)}
.suit.heart{color:#ff7b7b}.suit.club{color:#7bffa1}.suit.spade{color:#7bb0ff}.suit.diamond{color:#ffd166}
.foci{display:inline-flex;gap:4px;margin-left:6px;vertical-align:middle}
.focus{font-size:.85rem;padding:.1rem .4rem;border-radius:8px;background:#111727;border:1px solid var(--border)}
.focus.heart{color:#ff7b7b}.focus.club{color:#7bffa1}.focus.spade{color:#7bb0ff}.focus.diamond{color:#ffd166}
.hand{display:flex;gap:8px;flex-wrap:wrap}
.card{background:var(--card);border:1px solid #28324b;border-radius:12px;padding:8px 10px;min-width:58px;text-align:center}
.card .v{font-size:1.15rem;font-weight:800}
.actions{display:flex;gap:8px;flex-wrap:wrap;margin-top:6px}
.actions .play{background:var(--accent);color:#061024}
.actions .assist{background:#26304a}
.actions .end{background:#23303a}
.note{color:var(--muted);font-size:.9rem}
.tiny{font-size:.78rem;opacity:.9}
.desc{color:var(--muted);font-size:.8rem;margin-top:4px}
.divider{height:1px;background:#26304a;margin:10px 0}
.log{margin-top:10px;background:#0f1320;border:1px solid #1f2740;border-radius:14px;padding:10px;max-height:240px;overflow:auto}
.toast{position:fixed;left:50%;bottom:18px;transform:translateX(-50%);background:#12182a;border:1px solid #27304a;padding:10px 14px;border-radius:12px;box-shadow:0 8px 28px rgba(0,0,0,.45);display:none;z-index:99999}

/* ===== Rewards modal: one-screen, tabbed (fits iPhone screen) ===== */
.modalWrap{position:fixed;inset:0;background:rgba(0,0,0,.55);backdrop-filter:saturate(120%) blur(2px);display:none;align-items:flex-end;z-index:9999}
.modal{
  background:var(--panel);border-top-left-radius:20px;border-top-right-radius:20px;width:100%;max-width:820px;margin:0 auto;
  padding:12px;border:1px solid var(--border);border-bottom:0;box-shadow:0 -20px 60px rgba(0,0,0,.45) inset;
  max-height:100dvh; /* never exceed screen height */
}
.modal h4{margin:2px 0 6px}
.sub{margin:0 0 8px}
.upgradeBox{background:#0e1526;border:1px solid var(--border);border-radius:12px;padding:8px;margin:6px 0 10px}
.upLine{display:flex;gap:6px;align-items:center;flex-wrap:wrap}
.upBadge{padding:4px 8px;border-radius:999px;background:#121b31;border:1px solid var(--border);font-size:.78rem;color:var(--muted)}
.tabs{display:flex;gap:6px;margin:6px 0 8px}
.tab{flex:1;text-align:center;background:#0e1526;border:1px solid var(--border);padding:.55rem .6rem;border-radius:10px;color:#cbd6ff;font-weight:800;display:flex;align-items:center;justify-content:center;gap:6px}
.tab .foci{margin:0}
.tab.active{background:linear-gradient(180deg,#1a2440,#0f1730);box-shadow:0 6px 18px rgba(0,0,0,.25), 0 0 0 1px var(--border) inset}
.pane{display:grid;grid-template-columns:1fr 1fr;gap:8px}
.rewardCard{border-radius:12px;border:1px solid var(--border);background:linear-gradient(180deg,#141a2b,#0e1424);padding:10px;box-shadow:0 8px 20px rgba(0,0,0,.2)}
.legendCard{background:linear-gradient(135deg,#ffd166 0%,#ff9bd2 50%,#80e8ff 100%);color:#0c1020;border:0;min-height:64px;display:flex;align-items:center;justify-content:center;font-size:.98rem;font-weight:900;box-shadow:0 6px 22px var(--glow);transition:transform .06s ease}
.legendCard:active{transform:scale(.98)}
.gName{font-weight:800;margin-bottom:4px}
.chips{display:flex;gap:6px;flex-wrap:wrap;margin-bottom:6px}
.chipAttr{background:#121b31;border:1px solid var(--border);color:#cbd6ff;padding:3px 7px;border-radius:999px;font-size:.74rem}
.btnFull{width:100%}
.ghostMsg{font-size:.82rem;color:#9fb1d9}
.footerRow{display:flex;gap:8px;margin-top:10px;align-items:center}
.btnPrimary{background:var(--accent);color:#061024;box-shadow:0 6px 18px rgba(122,160,255,.25)}
.btnGhost{background:#0f1526;border:1px solid var(--border);color:#cbd6ff}
.dev{position:relative}

/* Compact */
@media (max-height: 720px){
  .modal{padding:10px}
  .legendCard{min-height:56px}
  .chipAttr{font-size:.7rem}
  .tab{padding:.5rem .55rem}
}
@media (max-width:520px){
  .pane{grid-template-columns:1fr 1fr}
}
